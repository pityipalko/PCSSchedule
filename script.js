let hasStorage=!1;hasStorage="undefined"!=typeof Storage,$.ajaxSetup({cache:!1});let defaultAllSchedules=JSON.parse('[[{"name":"1","start":"8:30","end":"10:15"},{"name":"Break","start":"10:15","end":"10:25"},{"name":"3","start":"10:30","end":"12:15"},{"name":"Lunch","start":"12:15","end":"12:55"},{"name":"5","start":"13:00","end":"14:45"},{"name":"Tutorial","start":"14:45","end":"15:30"}]]'),latestIntervalID;function newDebugDate(){let a=new Date;return a.setTime(a.getTime()+0),a}let override;function generateSchedule(g){let a=newDebugDate().getDay(),c;if(override){let d=newDebugDate(),h=`${d.getDate()}-${d.getMonth()+1}-${d.getFullYear()}`;c=override[h]?override[h]:g[a-1]}else c=g[a-1];if(0!=a&&6!=a||override){$("#periods").html("<tr><th>Period</th><th>Start</th><th>End</th></tr>");let e=[];latestIntervalID&&clearInterval(latestIntervalID);for(let f=0;f<c.length;f++){let i=timeStringToDate((currentP=c[f]).start),j=timeStringToDate(currentP.end);e.push({time:i.getTime(),name:"Start of "+currentP.name}),e.push({time:j.getTime(),name:"End of "+currentP.name});let l=i.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),m=j.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),k;k="Break"!=currentP.name&&"Lunch"!=currentP.name&&!currentP.name.includes("walkout")&&getClassName(currentP.name)?currentP.name+": "+getClassName(currentP.name):currentP.name;let b="<tr";currentP.name.includes("walkout")?b+=' class="walkout"':"Break"==currentP.name||"Lunch"==currentP.name?b+=' class="break"':b+=" value="+currentP.name,b+=`>
      <td>${k}</td>
      <td>${l}</td>
      <td>${currentP.name.includes("walkout")?"~":""}${m}</td>
    </tr>`,document.getElementById("periods").innerHTML+=b}$(".pinput").each(function(a){$(this).val(getClassName(String(a+1)))}),latestIntervalID=setInterval(renderTimer,1,e,a)}else{$("#timer").text("No school today!");return}}function getClassName(a){return hasStorage&&localStorage.getItem(a)?localStorage.getItem(a):void 0}function timeStringToDate(c){let a=newDebugDate(),b=c.split(":");return a.setHours(b[0],b[1],0),a}function findNext(b){let c=newDebugDate();for(let a=0;a<b.length;a++)if(b[a].time>=c.getTime())return b[a]}fetch("https://gist.githubusercontent.com/pityipalko/2c85c0fc5db48c14a5977d90f19ba012/raw/pcssc.json"+Math.floor(1e3*Math.random()),{cache:"no-store"}).then(async b=>{let a=await b.json();a!=defaultAllSchedules&&generateSchedule(defaultAllSchedules=a)}),fetch("https://gist.githubusercontent.com/pityipalko/2c85c0fc5db48c14a5977d90f19ba012/raw/pcssc.json"+Math.floor(1e3*Math.random()),{cache:"no-store"}).then(async a=>{override=await a.json(),generateSchedule(defaultAllSchedules)}),$(document).ready(()=>{generateSchedule(defaultAllSchedules)});let prevSec=0,prevNext=0;function renderTimer(c,d){d!=newDebugDate().getDay()&&generateSchedule(defaultAllSchedules),nextTime=findNext(c);let e=newDebugDate(),b=document.getElementById("timer");if(nextTime){let a=msToTime(nextTime.time-e.getTime());"visible"==document.visibilityState&&(b.innerHTML=a.minutes+":"+a.seconds+"."+a.milliseconds,prevNext!=nextTime&&($("#next").text("Until "+nextTime.name+(getClassName(nextTime.name.slice(-1))?": "+getClassName(nextTime.name.slice(-1)):"")),prevNext=nextTime)),prevSec!=a.seconds&&(document.title=a.minutes+":"+a.seconds,prevSec=a.seconds)}else b.innerText="School's Out!",document.title="School's Out!"}function msToTime(d){var a=Math.floor(d%1e3),b=Math.floor(d/1e3%60),c=Math.floor(d/6e4);return{minutes:c=c<10?"0"+c:c,seconds:b=b<10?"0"+b:b,milliseconds:a=a<100?a<10?"00"+a:"0"+a:a}}function setClassName(a,b){hasStorage&&(b&&""!=b?(localStorage.setItem(a,b),$(`tr[value=${a}] td:nth-child(1)`).text(a+": "+b)):(localStorage.removeItem(a),$(`tr[value=${a}] td:nth-child(1)`).text(a)))}$("#shownaming").click(()=>{$("#naming").stop(),$("#naming").slideToggle()}),$(".pinput").on("input",function(){let a=$(this);setClassName(a.attr("id")[1],a.val())})
